---
title: 基础知识-终端工具的基本使用
categories: 基础知识
tags: [terminal, shell, bash, zsh, 如何打开终端工具]
abbrlink: 881
date: 2020-08-19 12:02:37
---

只要使用您经常使用电脑，肯定或多或少听说过电脑终端。并且遇到稍微复杂点的电脑故障时，教程或者案例总是教我们如何如何在终端中操作、及其如何如何终结。那么，终端到底是什么？

{% asset_img terminal.jpg %}

要讲明终端是什么，首先我们需要了解电脑系统的组成。通俗点的说，操作系统由两部分组成，分别是内核和用户式的交互式界面。内核负责系统的全部逻辑操作，由非常多的命令组成。这部分是系统正常运行的基础，不与用户直接接触。而交互式界面则统指的是我们常使用的程序... ...

如果我们想修改系统内核的某些命令及其逻辑，怎么办？这时就需要用到「终端」了，它是内核与交互式界面连接的一座桥梁。允许用户在交互式界面上打开一个叫「Terminal.app」的应用程序，在其中输入命令，进而系统给出相应的反馈。因此，终端实际允许用户间接控制系统内核，理论上能够控制一切。
<!-- more -->

## 终端打开方式

1. {%label @⌘Command + 空格键 %} 调出聚焦搜索，然后键入「terminal」或「终端」关键字。
2. 请依次点按 “访达-应用程序-实用工具-终端.app”。
3. 四指从外向里抓触控板，在启动台的「实用工具」里找到。

## 定制shell提示符

终端中的每个窗口都代表着一个 shell 进程的实例。打开终端时，窗口内会相应的一些提示符，这些提示符跟您对终端和 shell 的设置有关。通常情况下是下面的样子：

```bash
Admin@MacBook~Desktop/ $
```

- Admin 用户名
- MacBook 电脑名称
- ~Desktop/ 当前所在目录

上述提示符在系统内的配置是 {%label @export PS1=“\u@\h\w $ ” %}，通过修改 shell 脚本的解释器，可以对其进行更改。MacOS 系统默认的是 bash 登录式脚本解释器，所以您需要修改的是 {%label @~/.bash_profile %}。PS1后的参数：

{% note %}
除了 bash 解释器外，系统还内置了一些其它的解析器，使用 {%label @cat /etc/shells %} 或 {%label @echo $SHELL %} 命令可对其枚举。
{% endnote %}

- \W：当前工作目录名的最后部分
- \w：完整目录名
- $：显示”$”字符，超级用户显示一个”#”字符
- \l：当前终端设备名
- \d：当前日期
- \t：当前时间
- \h：hostname

修改完成后，需要通过 {%label @source ~/.bash_profile %} 对其重启，才可生效。如果您还想修改终端内的用户名，可使用 {%label @sudo scutil --set HostName yourname %} 命令。

## 切换shell解释器

```bash
chsh -s /bin/zsh
```

## 安装Command line tools

```bash
xcode-select -–install
```

在弹出的界面点 install 同意即可（经常使用VPN工具的，记得要关闭）

{% post_link 系统命令-xcode-select-install "关于 Command line tools 的解释" %}

## tab自动补全

打开 Terminal 输入 {%label @nano .inputrc %}，再输入下述内容

```bash
set completion-ignore-case on
set show-all-if-ambiguous on
TAB: menu-complete
```

完成后按 {%label @⌃Control ＋ o %} 键保存关闭、重启。

## 安装oh-my-zsh

```bash
git clone https://github.com/ohmyzsh/ohmyzsh.git ~/.oh-my-zsh
cp ~/.oh-my-zsh/templates/zshrc.zsh-template ~/.zshrc

# 切换shell解释器为zsh
chsh -s $(which zsh)
```

完成后重启终端。卸载 oh-my-zsh 直接在终端执行 {%label @uninstall_oh_my_zsh %} 进行卸载！并且它内置了很多 Plugins，默认开启的是 git，您也可以按照 https://github.com/ohmyzsh/ohmyzsh/wiki/Plugins 所示开启和查看。

更改主题可到 https://github.com/ohmyzsh/ohmyzsh/wiki/Themes 查阅，看好那个主题后，可直接到 ~/.zshrc 内修改 {%label @ZSH_THEME="" %} 模块，再 {%label @source ~/.zshrc %} 重启下，即可完成对主题变更。

## 基础命令

{%label @pwd %} 以绝对路径的方式显示用户当前所在的工作目录位置

```bash
cd ~/Downloads
pwd
# /Users/***/Downloads
```

{%label @cd %} 进到指定目录或文件夹

```bash
# 进入用户根目录
cd
# 或
cd ~

# 进入系统根目录
cd /

# 回到上次所在目录
cd -

# 回到上一级目录
cd ..
```

{%label @touch %} 创建文件

```bash
touch ~/a.txt
```

{%label @cp %} 拷贝文件或目录

```bash
# 将文件复制到用户根目录下
cp empty ~

# 复制目录下所有以 js 结尾的文件到 Downloads/Js 目录下
# 如果 Downloads 目录下没有 Js 文件夹的话，将会自动创建一个
cp *.js ~/Downloads/Js

# 加 -r 选项，复制目录下所有的文件以及子目录
cp -r . ~/Downloads/Js

# 复制一个文件并且重新命名，然后移动到指定位置
cp empty ~/Downloads/newEmpty
```

{%label @mv %} 改变文件名或所在目录的位置

```bash
# 移动文件或目录到指定位置
mv empty ~/Downloads/empty

# 先给文件或目录重新命名，然后再移动到指定位置
mv empty ~/Downloads/newEmpty
```

{%label @rm %} 用来删除文件和目录，需要格外慎重。

```bash
# 普通的删除文件
rm ~/Downloads/empty

# 递归删除目录下所有的文件以及子目录
rm -r empty

# 强制删除
rm -f ~/Downloads/empty

# 递归强制删除
rm -rf ~/Downloads/
```

{%label @mkdir %} 创建目录

```bash
# 创建一个空白的目录
mkdir empty

# 创建一个有子目录的目录
# -p 选项是，如果要创建的目录的父级目录不存在的话，一并创建
mkdir -p ~/Downloads/New/empty

# 一次性创建多个目录
mkdir emptyA emptyA ~/Downloads/emptyC

# 一次性创建多个目录，并且某个要创建的目录拥有多个字目录
mkdir emptyA emptyB/{emptyB-A, emptyB-B, emptyB-C}
```

{%label @rmdir %} 删除空白文件目录

```bash
# 删除空白文件目录，如果目录下有东西是删除不了的
rmdir empty

# 加 -p 选项
# 如果删除了某个目录，父目录就变为空目录的话，就一块删除
rmdir ~/Downloads/empty

# 删除多个目录
rmdir emptyA emptyB
```

{%label @ls %} 枚举目标目录中所有的子目录和文件，注意参数的大小写。

```bash
# 列出当前目录下非隐藏的文件和目录，等价于“ls -C（注意：大写）”
ls

# 列出目录下的所有文件，包括以“.”开头的隐含文件
ls -a
ls -all

# 与上面的“ls -a”命令几乎相同，只不过是此命令不显示“.（当前目录）”和“..（父级目录）”这两个
ls -A

# 列出当前目录下非隐藏的文件和目录，并用逗号“,”分割
ls -m

# 列出当前目录下所有的文件或目录详细信息
ls -l

# 列出指定文件的详细信息
ls -l empty

# 用文件或目录修改的时间进行排序
ls -t

# 递归显示文件，会把此根目录下的所有文件都显示出来
ls -R
```

{%label @kill %} 结束指定进程

```bash
# kill 9 强制终止进程
kill 9 40142
```

{%label @clear %} 清空屏幕信息

## 快捷键

这里只列出几个常用的，更多请查阅 "帮助 - 终端帮助 - 键盘快捷键"

- {%label @⌘Command + N %}：再打开一个终端
- {%label @⌘Command + T %}：新建窗口
- {%label @⇧Shift + ⌘Command + K %}：新建远程连接
- {%label @⌃Control + A %}：光标移到行开头
- {%label @⌃Control + E %}：光标移到行结尾
- {%label @⌃Control + U %}：光标位置删除到行开头
- {%label @⌃Control + K %}：光标位置删除到行尾
- {%label @⌃Control + W %}：删除光标位置左侧一个单词
- {%label @⌥option + D %}：删除光标位置右侧一个单词（终端 - 偏好设置 - 描述文件 - 键盘 - 勾选将option键用作Meta键）
- {%label @⌥option + 左箭头 %}：光标前移一个单词
- {%label @⌥option + 右箭头 %}：光标后移一个单词
- {%label @⌘Command + . %}：中断（跳转到下一行重新开始）